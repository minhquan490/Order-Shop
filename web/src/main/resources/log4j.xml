<?xml version="1.0" ?>
<Configuration>
    <Appenders>
        <Console name="stdout">
            <PatternLayout pattern="[%d{HH:mm:ss.SSS}] [%t] [%-5level] [%logger{36}] - %msg%n"/>
        </Console>
        <RollingFile name="infoFile" fileName="./log/info.log"
                     filePattern="./log/%d{dd-MM-yyyy}/info-%d{dd-MM-yyyy}.log.gz">
            <PatternLayout pattern="[%d{HH:mm:ss.SSS}] [%t] [%-5level] [%logger{36}] - %msg%n"/>
            <Filters>
                <ThresholdFilter onMatch="DENY" onMismatch="NEUTRAL" level="ERROR"/>
                <ThresholdFilter onMatch="ACCEPT" onMismatch="DENY" level="DEBUG"/>
            </Filters>
            <SizeBasedTriggeringPolicy size="5 MB"/>
        </RollingFile>
        <RollingFile name="errorFile" fileName="./log/error.log"
                     filePattern="./log/%d{dd-MM-yyyy}/error-%d{dd-MM-yyyy}.log.gz">
            <PatternLayout pattern="[%d{HH:mm:ss.SSS}] [%t] [%-5level] [%logger{36}] - %msg%n"/>
            <Filters>
                <ThresholdFilter onMatch="DENY" onMismatch="NEUTRAL" level="FATAL"/>
                <ThresholdFilter onMatch="ACCEPT" onMismatch="DENY" level="ERROR"/>
            </Filters>
            <SizeBasedTriggeringPolicy size="5 MB"/>
        </RollingFile>
        <RollingFile name="applicationLog" fileName="./log/application.log"
                     filePattern="./log/%d{dd-MM-yyyy}/application-%d{dd-MM-yyyy}.log.gz">
            <PatternLayout pattern="[%d{HH:mm:ss.SSS}] [%t] [%-5level] [%logger{36}] - %msg%n"/>
            <Filters>
                <ThresholdFilter onMatch="DENY" onMismatch="NEUTRAL" level="ERROR"/>
                <ThresholdFilter onMatch="ACCEPT" onMismatch="DENY" level="DEBUG"/>
            </Filters>
            <SizeBasedTriggeringPolicy size="5 MB"/>
        </RollingFile>
        <RollingFile name="query" fileName="./log/query.log"
                     filePattern="./log/%d{dd-MM-yyyy}/query-%d{dd-MM-yyyy}.log.gz">
            <PatternLayout pattern="[%d{HH:mm:ss.SSS}] [%t] [%-5level] [%logger{36}] - %msg%n"/>
            <Filters>
                <ThresholdFilter onMatch="DENY" onMismatch="NEUTRAL" level="ERROR"/>
                <ThresholdFilter onMatch="ACCEPT" onMismatch="DENY" level="DEBUG"/>
            </Filters>
            <SizeBasedTriggeringPolicy size="5 MB"/>
        </RollingFile>
    </Appenders>
    <Loggers>
        <AsyncLogger name="com.bachlinh.order" level="DEBUG" additivity="false">
            <AppenderRef ref="applicationLog"/>
            <AppenderRef ref="errorFile"/>
            <AppenderRef ref="stdout"/>
        </AsyncLogger>
        <AsyncLogger name="org.hibernate.SQL" level="DEBUG" additivity="false">
            <AppenderRef ref="query"/>
            <AppenderRef ref="stdout"/>
        </AsyncLogger>
        <AsyncLogger name="org.hibernate.type.descriptor.sql" level="trace" additivity="false">
            <AppenderRef ref="stdout"/>
            <AppenderRef ref="query"/>
        </AsyncLogger>
        <AsyncLogger name="io.grpc.netty" level="DEBUG" additivity="false">
            <AppenderRef ref="infoFile"/>
            <AppenderRef ref="errorFile"/>
        </AsyncLogger>
        <AsyncLogger name="com.zaxxer.hikari" level="DEBUG" additivity="false">
            <AppenderRef ref="infoFile"/>
        </AsyncLogger>
    </Loggers>
</Configuration>